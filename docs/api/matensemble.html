

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>matensemble package &mdash; MatEnsemble 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=01f34227"></script>
      <script src="../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="matensemble" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MatEnsemble
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">matensemble</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">matensemble package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-matensemble.fluxlet">matensemble.fluxlet module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.fluxlet.Fluxlet"><code class="docutils literal notranslate"><span class="pre">Fluxlet</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.fluxlet.normalize_task_args"><code class="docutils literal notranslate"><span class="pre">normalize_task_args()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.fluxlet.resolve_workdir"><code class="docutils literal notranslate"><span class="pre">resolve_workdir()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-matensemble.logger">matensemble.logger module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.logger.StatusWriter"><code class="docutils literal notranslate"><span class="pre">StatusWriter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.logger.WorkflowPaths"><code class="docutils literal notranslate"><span class="pre">WorkflowPaths</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.logger.atomic_write_text"><code class="docutils literal notranslate"><span class="pre">atomic_write_text()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.logger.create_workflow_paths"><code class="docutils literal notranslate"><span class="pre">create_workflow_paths()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.logger.job_id"><code class="docutils literal notranslate"><span class="pre">job_id()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.logger.setup_workflow_logging"><code class="docutils literal notranslate"><span class="pre">setup_workflow_logging()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.logger.timestamp_for_filename"><code class="docutils literal notranslate"><span class="pre">timestamp_for_filename()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-matensemble.manager">matensemble.manager module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#matensemble.manager.SuperFluxManager"><code class="docutils literal notranslate"><span class="pre">SuperFluxManager</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#matensemble-matflux-module">matensemble.matflux module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matensemble-matfluxgen-module">matensemble.matfluxGen module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-matensemble">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MatEnsemble</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">matensemble</a></li>
      <li class="breadcrumb-item active">matensemble package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/matensemble.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="matensemble-package">
<h1>matensemble package<a class="headerlink" href="#matensemble-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-matensemble.fluxlet">
<span id="matensemble-fluxlet-module"></span><h2>matensemble.fluxlet module<a class="headerlink" href="#module-matensemble.fluxlet" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="matensemble.fluxlet.Fluxlet">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">matensemble.fluxlet.</span></span><span class="sig-name descname"><span class="pre">Fluxlet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tasks_per_job</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cores_per_task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpus_per_task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/fluxlet.html#Fluxlet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.fluxlet.Fluxlet" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper around Flux job submission for a single ‘task’.</p>
<p>A Fluxlet builds a Flux Jobspec for a task,
applies resource requirements (tasks_per_job, cores_per_task, gpus_per_task),
and submits it through a FluxExecutor.</p>
<p>For convenience/debugging, the submitted Future is annotated with metadata
(e.g., task id, jobspec, workdir), so higher-level orchestration code
(SuperFluxManager / strategy implementations) can track progress and locate
task outputs.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.fluxlet.Fluxlet.flux_handle">
<span class="sig-name descname"><span class="pre">flux_handle</span></span><a class="headerlink" href="#matensemble.fluxlet.Fluxlet.flux_handle" title="Link to this definition"></a></dt>
<dd><p>A reference to the flux instance that is managing the resources</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>flux.Flux()</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.fluxlet.Fluxlet.future">
<span class="sig-name descname"><span class="pre">future</span></span><a class="headerlink" href="#matensemble.fluxlet.Fluxlet.future" title="Link to this definition"></a></dt>
<dd><p>The future objects representing the completion of tasks</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[FluxExecutorFuture]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.fluxlet.Fluxlet.tasks_per_job">
<span class="sig-name descname"><span class="pre">tasks_per_job</span></span><a class="headerlink" href="#matensemble.fluxlet.Fluxlet.tasks_per_job" title="Link to this definition"></a></dt>
<dd><p>The number of sub-tasks that will go along with a task</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.fluxlet.Fluxlet.cores_per_task">
<span class="sig-name descname"><span class="pre">cores_per_task</span></span><a class="headerlink" href="#matensemble.fluxlet.Fluxlet.cores_per_task" title="Link to this definition"></a></dt>
<dd><p>The number of CPU cores that a task requires</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.fluxlet.Fluxlet.gpus_per_task">
<span class="sig-name descname"><span class="pre">gpus_per_task</span></span><a class="headerlink" href="#matensemble.fluxlet.Fluxlet.gpus_per_task" title="Link to this definition"></a></dt>
<dd><p>The number of GPUs that a task requires</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.fluxlet.Fluxlet.hetero_job_submit">
<span class="sig-name descname"><span class="pre">hetero_job_submit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">executor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nnodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpus_per_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_out_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_gpu_affinity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_cpu_affinity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_mpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/fluxlet.html#Fluxlet.hetero_job_submit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.fluxlet.Fluxlet.hetero_job_submit" title="Link to this definition"></a></dt>
<dd><p>Same as job_submit but uses the GPU for redis streaming I think</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.fluxlet.Fluxlet.job_submit">
<span class="sig-name descname"><span class="pre">job_submit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">executor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_out_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_gpu_affinity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_cpu_affinity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_mpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/fluxlet.html#Fluxlet.job_submit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.fluxlet.Fluxlet.job_submit" title="Link to this definition"></a></dt>
<dd><p>Submits a job to a with the given FluxExecutor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>executor</strong> (<em>FluxExecutor</em>) – The executor that the task will be submitted to</p></li>
<li><p><strong>command</strong> (<em>str</em>) – The command to run the task</p></li>
<li><p><strong>task</strong> (<em>str</em><em> | </em><em>int</em>) – The task ID</p></li>
<li><p><strong>task_args</strong> (<em>list</em><em>[</em><em>str</em><em> | </em><em>int</em><em>]</em>) – The arguments of the task</p></li>
<li><p><strong>task_directory</strong> (<em>str</em>) – The directory where the results of the task will be placed</p></li>
<li><p><strong>base_out_dir</strong> (<em>Path</em>) – The base dir of where the entire workflow’s output is</p></li>
<li><p><strong>set_gpu_affinity</strong> (<em>bool</em>) – Whether the task can-be/prefer computed on GPUs</p></li>
<li><p><strong>set_cpu_affinity</strong> – Whether the task perfers the CPU</p></li>
<li><p><strong>set_mpi</strong> (<em>bool</em><em> | </em><em>None</em>) – Whether the task will use a message passing interface</p></li>
<li><p><strong>env</strong> (<em>i really don't know on this one</em>) – I forgot what this is ¯(ツ)/¯</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">FluxExecutorFuture</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="matensemble.fluxlet.normalize_task_args">
<span class="sig-prename descclassname"><span class="pre">matensemble.fluxlet.</span></span><span class="sig-name descname"><span class="pre">normalize_task_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/fluxlet.html#normalize_task_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.fluxlet.normalize_task_args" title="Link to this definition"></a></dt>
<dd><p>Ensure that the task_args are of the supported types</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>task_args</strong> (<em>list</em><em>[</em><em>int</em><em> | </em><em>str</em><em> | </em><em>float</em><em>] </em><em>| </em><em>int</em><em> | </em><em>str</em><em> | </em><em>float</em><em> | </em><em>np.int64</em><em> | </em><em>dict</em>) – The arguments for the task</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="matensemble.fluxlet.resolve_workdir">
<span class="sig-prename descclassname"><span class="pre">matensemble.fluxlet.</span></span><span class="sig-name descname"><span class="pre">resolve_workdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_out_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launch_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/fluxlet.html#resolve_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.fluxlet.resolve_workdir" title="Link to this definition"></a></dt>
<dd><p>Decide where the task should run and where stdout/stderr land.
No cwd changes, just returns an absolute Path that exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></span></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-matensemble.logger">
<span id="matensemble-logger-module"></span><h2>matensemble.logger module<a class="headerlink" href="#module-matensemble.logger" title="Link to this heading"></a></h2>
<p>Logging + status utilities for MatEnsemble.</p>
<p>This module creates a per-run workflow directory:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;JOBID&gt;_matensemble_workflow/
  status.log
  logs/
    &lt;timestamp&gt;_matensemble_workflow.log
  out/
    &lt;task-id&gt;/
      stdout
      stderr
</pre></div>
</div>
<p>The status file is overwritten on each update so users can monitor progress:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">watch -n 1 cat &lt;JOBDIR&gt;/status.log</span>
</pre></div>
</div>
<p>The verbose log file contains timestamped messages and is always written to disk.</p>
<dl class="py class">
<dt class="sig sig-object py" id="matensemble.logger.StatusWriter">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">matensemble.logger.</span></span><span class="sig-name descname"><span class="pre">StatusWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#StatusWriter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.StatusWriter" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to handle writing to the status file</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.logger.StatusWriter.path">
<span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#matensemble.logger.StatusWriter.path" title="Link to this definition"></a></dt>
<dd><p>the path to the status file</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">render(</span></span></dt>
<dd><p>pending: int,
running: int,
completed: int,
failed: int,
free_cores: int,
free_gpus: int,
include_updated_line: bool = True,</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">)</span></span></dt>
<dd><p>Creates the output for the status of the program as a str and returns it</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">update(</span></span></dt>
<dd><p>self,
pending: int,
running: int,
completed: int,
failed: int,
free_cores: int,
free_gpus: int,</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">)</span></span></dt>
<dd><p>Calls the render method to create the text and then calls
atomic_write_text to write to the status file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.logger.StatusWriter.render">
<span class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pending</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">running</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">completed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">free_cores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">free_gpus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_updated_line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#StatusWriter.render"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.StatusWriter.render" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.logger.StatusWriter.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pending</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">running</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">completed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">free_cores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">free_gpus</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#StatusWriter.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.StatusWriter.update" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="matensemble.logger.WorkflowPaths">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">matensemble.logger.</span></span><span class="sig-name descname"><span class="pre">WorkflowPaths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logs_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose_log_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#WorkflowPaths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.WorkflowPaths" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Dataclass to hold the locations for the status file, log file, and output
directory.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.logger.WorkflowPaths.base_dir">
<span class="sig-name descname"><span class="pre">base_dir</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></span><a class="headerlink" href="#matensemble.logger.WorkflowPaths.base_dir" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.logger.WorkflowPaths.logs_dir">
<span class="sig-name descname"><span class="pre">logs_dir</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></span><a class="headerlink" href="#matensemble.logger.WorkflowPaths.logs_dir" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.logger.WorkflowPaths.out_dir">
<span class="sig-name descname"><span class="pre">out_dir</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></span><a class="headerlink" href="#matensemble.logger.WorkflowPaths.out_dir" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.logger.WorkflowPaths.status_file">
<span class="sig-name descname"><span class="pre">status_file</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></span><a class="headerlink" href="#matensemble.logger.WorkflowPaths.status_file" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.logger.WorkflowPaths.verbose_log_file">
<span class="sig-name descname"><span class="pre">verbose_log_file</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></span><a class="headerlink" href="#matensemble.logger.WorkflowPaths.verbose_log_file" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="matensemble.logger.atomic_write_text">
<span class="sig-prename descclassname"><span class="pre">matensemble.logger.</span></span><span class="sig-name descname"><span class="pre">atomic_write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#atomic_write_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.atomic_write_text" title="Link to this definition"></a></dt>
<dd><p>Helper function so <cite>watch cat status.log</cite> never sees a half-written file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>Path</em>) – The path to the status file</p></li>
<li><p><strong>text</strong> (<em>str</em>) – The str to write to the status file</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="matensemble.logger.create_workflow_paths">
<span class="sig-prename descclassname"><span class="pre">matensemble.logger.</span></span><span class="sig-name descname"><span class="pre">create_workflow_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#create_workflow_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.create_workflow_paths" title="Link to this definition"></a></dt>
<dd><p>Helper function to create the output directory</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An object that encapsulates all of the paths for the output
files/directoriesof the matensemble workflow</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#matensemble.logger.WorkflowPaths" title="matensemble.logger.WorkflowPaths">WorkflowPaths</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Structure of the output directory:</p>
<blockquote>
<div><dl>
<dt>&lt;SLURM_JOB_ID&gt;_matensemble_workflow/</dt><dd><p><a href="#id1"><span class="problematic" id="id2">|</span></a>- status.log
<a href="#id3"><span class="problematic" id="id4">|</span></a>- logs/</p>
<blockquote>
<div><p><a href="#id5"><span class="problematic" id="id6">|</span></a>- &lt;timestamp&gt;_matensemble_workflow.log</p>
</div></blockquote>
<dl class="simple">
<dt><a href="#id7"><span class="problematic" id="id8">|</span></a>- out/</dt><dd><p><a href="#id9"><span class="problematic" id="id10">|</span></a>- &lt;output_of_workflow&gt;</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="matensemble.logger.job_id">
<span class="sig-prename descclassname"><span class="pre">matensemble.logger.</span></span><span class="sig-name descname"><span class="pre">job_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#job_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.job_id" title="Link to this definition"></a></dt>
<dd><p>Helper function to get the job_id to set the name of the
&lt;SLURM_JOB_ID&gt;_matensemble_workflow directory</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The SLURM_JOB_ID environment variable or the process ID</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="matensemble.logger.setup_workflow_logging">
<span class="sig-prename descclassname"><span class="pre">matensemble.logger.</span></span><span class="sig-name descname"><span class="pre">setup_workflow_logging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'matensemble'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">console</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#setup_workflow_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.setup_workflow_logging" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Creates:</dt><dd><ul class="simple">
<li><p>workflow directory tree</p></li>
<li><p>status writer (status.log)</p></li>
<li><p>verbose python logger (timestamped file, optional console)</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>logger_name</strong> (<em>str</em>) – The name of the logger</p></li>
<li><p><strong>base_dir</strong> (<em>str</em><em> | </em><em>Path</em>) – Where the matensemble_workflow directory will be setup</p></li>
<li><p><strong>console</strong> (<em>bool</em><em> | </em><em>None</em>) – Whether or not we are in an interactive environment</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a three element tuple with the logger, StatusWriter and WorkflowPaths</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="matensemble.logger.timestamp_for_filename">
<span class="sig-prename descclassname"><span class="pre">matensemble.logger.</span></span><span class="sig-name descname"><span class="pre">timestamp_for_filename</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/logger.html#timestamp_for_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.logger.timestamp_for_filename" title="Link to this definition"></a></dt>
<dd><p>Helper function to get the date and time</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The date and time in the format YYYY-MM-DD_HH-mm-SS</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-matensemble.manager">
<span id="matensemble-manager-module"></span><h2>matensemble.manager module<a class="headerlink" href="#module-matensemble.manager" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">matensemble.manager.</span></span><span class="sig-name descname"><span class="pre">SuperFluxManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gen_task_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gen_task_cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_restart_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tasks_per_job</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cores_per_task</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpus_per_task</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nnodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpus_per_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restart_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.manager.SuperFluxManager" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Task submission manager that orchestrates high-throughput Flux jobs
with ‘Fluxlets’ and tracks state and periodically ‘pickles’ restart files.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.pending_tasks">
<span class="sig-name descname"><span class="pre">pending_tasks</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.pending_tasks" title="Link to this definition"></a></dt>
<dd><p>A double ended-queue for tasks that are yet to start running or be
completed</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>deque</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.running_tasks">
<span class="sig-name descname"><span class="pre">running_tasks</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.running_tasks" title="Link to this definition"></a></dt>
<dd><p>The tasks that are currently running</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>set</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.completed_tasks">
<span class="sig-name descname"><span class="pre">completed_tasks</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.completed_tasks" title="Link to this definition"></a></dt>
<dd><p>Tasks that have been completed successfully</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.failed_tasks">
<span class="sig-name descname"><span class="pre">failed_tasks</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.failed_tasks" title="Link to this definition"></a></dt>
<dd><p>Tasks that have failed</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.flux_handle">
<span class="sig-name descname"><span class="pre">flux_handle</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.flux_handle" title="Link to this definition"></a></dt>
<dd><p>The flux handle for resource managment and task execution</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>flux.Flux()</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.futures">
<span class="sig-name descname"><span class="pre">futures</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.futures" title="Link to this definition"></a></dt>
<dd><p>Set of FluxExecutorFuture objects representing the tasks output</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>set</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.tasks_per_job">
<span class="sig-name descname"><span class="pre">tasks_per_job</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.tasks_per_job" title="Link to this definition"></a></dt>
<dd><p>Double ended-queue of integers representing the number of sub-tasks per
task</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>deque</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.cores_per_task">
<span class="sig-name descname"><span class="pre">cores_per_task</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.cores_per_task" title="Link to this definition"></a></dt>
<dd><p>The number of CPU cores that will be allocated to each task</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.gpus_per_task">
<span class="sig-name descname"><span class="pre">gpus_per_task</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.gpus_per_task" title="Link to this definition"></a></dt>
<dd><p>The number of GPUs that will be allocated to each task</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.gen_task_cmd">
<span class="sig-name descname"><span class="pre">gen_task_cmd</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.gen_task_cmd" title="Link to this definition"></a></dt>
<dd><p>The general command that each task will follow</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.write_restart_frew">
<span class="sig-name descname"><span class="pre">write_restart_frew</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.write_restart_frew" title="Link to this definition"></a></dt>
<dd><p>How many tasks need to be completed before creating another restart file</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.executor">
<span class="sig-name descname"><span class="pre">executor</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.executor" title="Link to this definition"></a></dt>
<dd><p>Executor for task submission</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>flux.Executor()</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.logger" title="Link to this definition"></a></dt>
<dd><p>Handles logging status and updates</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>logging.Logger()</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.status">
<span class="sig-name descname"><span class="pre">status</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.status" title="Link to this definition"></a></dt>
<dd><p>Writes to a status file that the user can watch to see progress updates</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>matensemble.logging.StatusWriter()</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.paths">
<span class="sig-name descname"><span class="pre">paths</span></span><a class="headerlink" href="#matensemble.manager.SuperFluxManager.paths" title="Link to this definition"></a></dt>
<dd><p>Creates the output directories to in the following structure
&lt;director_job_is_launched_from&gt;/&lt;SLURM_JOB_ID&gt;_matensemble_workflow/</p>
<blockquote>
<div><p><a href="#id11"><span class="problematic" id="id12">|</span></a>-status.log
<a href="#id13"><span class="problematic" id="id14">|</span></a>-logs/</p>
<blockquote>
<div><p><a href="#id15"><span class="problematic" id="id16">|</span></a>-&lt;timestamp&gt;_matensemble_workflow.log</p>
</div></blockquote>
<dl class="simple">
<dt><a href="#id17"><span class="problematic" id="id18">|</span></a>-out/</dt><dd><p><a href="#id19"><span class="problematic" id="id20">|</span></a>-&lt;output_of_workflow&gt;</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#matensemble.logger.WorkflowPaths" title="matensemble.logger.WorkflowPaths">matensemble.logger.WorkflowPaths</a>()</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.load_restart">
<span class="sig-name descname"><span class="pre">load_restart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.load_restart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.manager.SuperFluxManager.load_restart" title="Link to this definition"></a></dt>
<dd><p>Sets the completed_tasks, running_tasks, pending_tasks and failed_tasks
and restarts the ensemble</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.create_restart_file">
<span class="sig-name descname"><span class="pre">create_restart_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.create_restart_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.manager.SuperFluxManager.create_restart_file" title="Link to this definition"></a></dt>
<dd><p>Pickles the current state of the program into a file</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.check_resources">
<span class="sig-name descname"><span class="pre">check_resources</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.check_resources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.manager.SuperFluxManager.check_resources" title="Link to this definition"></a></dt>
<dd><p>Gets the available resources from Flux’s Remote Procedure Call (RPC)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.log_progress">
<span class="sig-name descname"><span class="pre">log_progress</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.log_progress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.manager.SuperFluxManager.log_progress" title="Link to this definition"></a></dt>
<dd><p>Logs the current state of the program, pending_tasks, running_tasks,
completed_tasks, failed_tasks and a resource count free_cores and
free_gpus</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">poolexecutor(</span></span></dt>
<dd><p>self,
task_arg_list,
buffer_time=0.5,
task_dir_list=None,
adaptive=True,
dynopro=False,</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">)</span></span></dt>
<dd><p>High-throughput executor implementation</p>
</dd></dl>

<p class="rubric">Notes</p>
<p>buffer_time is used by strategies both as a polling timeout and as an intentional
submission pacing delay (time.sleep), so large values can significantly slow
end-to-end throughput.</p>
<dl class="py method">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">check_resources</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.check_resources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id0" title="Link to this definition"></a></dt>
<dd><p>Gets the available resources from Flux’s Remote Procedure Call (RPC)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id21">
<span class="sig-name descname"><span class="pre">create_restart_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.create_restart_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id21" title="Link to this definition"></a></dt>
<dd><p>Pickles the current state of the program into a file</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id22">
<span class="sig-name descname"><span class="pre">load_restart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.load_restart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id22" title="Link to this definition"></a></dt>
<dd><p>Sets the completed_tasks, running_tasks, pending_tasks and failed_tasks
and restarts the ensemble</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – The name of the file to restart from</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id23">
<span class="sig-name descname"><span class="pre">log_progress</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.log_progress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id23" title="Link to this definition"></a></dt>
<dd><p>Logs the current state of the program, pending_tasks, running_tasks,
completed_tasks, failed_tasks and a resource count free_cores and
free_gpus</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="matensemble.manager.SuperFluxManager.poolexecutor">
<span class="sig-name descname"><span class="pre">poolexecutor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_arg_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_dir_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adaptive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynopro</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">submis_strat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fut_proc_strat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matensemble/manager.html#SuperFluxManager.poolexecutor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#matensemble.manager.SuperFluxManager.poolexecutor" title="Link to this definition"></a></dt>
<dd><p>High-throughput executor implementation</p>
<p>The poolexecutor uses the “Strategy Pattern” for a more concise and
modular implementation of the poolexecutor. Depending on whether or not
tasks make use of GPUs or only CPUs is adaptive or use the dynopro module
the TaskSubmissionStrategy will be determined at run time and injected
into the super loop.</p>
<p>For implementing your own strategies you can look at the docs in the
strategy directory of the matensemble package</p>
<p>GitHub:
Strategy Patter: <a class="reference external" href="https://refactoring.guru/design-patterns/strategy">https://refactoring.guru/design-patterns/strategy</a></p>
<blockquote>
<div><p><a class="reference external" href="https://en.wikipedia.org/wiki/Design_Patterns">https://en.wikipedia.org/wiki/Design_Patterns</a></p>
</div></blockquote>
<p>Runs a “super loop” until there are no more pending tasks and no
running tasks.
Each loop iteration:
1) refreshes available resources
2) prints a progress snapshot
3) submits new jobs until resources are exhausted using a</p>
<blockquote>
<div><p>TaskSubmissionStrategy:
- DynoproStrategy if dynopro=True
- GPUAffineStrategy if gpus_per_task &gt; 0
- CPUAffineStrategy otherwise</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>processes completed jobs using a FutureProcessingStrategy:
- AdaptiveStrategy if adaptive=True
- NonAdaptiveStrategy otherwise</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_arg_list</strong> (<em>list</em><em>[</em><em>int</em><em> | </em><em>str</em><em>]</em>) – List of tasks to be scheduled and completed</p></li>
<li><p><strong>buffer_time</strong> (<em>int</em><em> | </em><em>float</em>) – The amount of time that will be used as the timeout= option for
Future objects</p></li>
<li><p><strong>task_dir_list</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – Where completed tasks output files will be placed</p></li>
<li><p><strong>adaptive</strong> (<em>bool</em>) – Whether or not tasks are scheduled adaptively, default is True</p></li>
<li><p><strong>dynopro</strong> (<em>bool</em>) – Whether or not the dynopro module will be used for task submission,
default is False</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="matensemble-matflux-module">
<h2>matensemble.matflux module<a class="headerlink" href="#matensemble-matflux-module" title="Link to this heading"></a></h2>
</section>
<section id="matensemble-matfluxgen-module">
<h2>matensemble.matfluxGen module<a class="headerlink" href="#matensemble-matfluxgen-module" title="Link to this heading"></a></h2>
</section>
<section id="module-matensemble">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-matensemble" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules.html" class="btn btn-neutral float-left" title="matensemble" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Soumendu Bagchi, Kaleb Duchesneau.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>